<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Esercizio 2 - Gabriele Caretti</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js" integrity="sha512-zlWWyZq71UMApAjih4WkaRpikgY9Bz1oXIW5G0fED4vk14JjGlQ1UmkGM392jEULP8jbNMiwLWdM8Z87Hu88Fw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.css" integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script>

        // Oggetto con le informazioni personali della prenotazione.
        var prenotazione = {
            nome: "",
            cognome: "",
            citta: "",
            nazionalita: "",
            telefono: "",
            cellulare: "",
            fax: "",
            email: "",
            camera: "",
            dataArrivo: "",
            dataPartenza: ""
        };

        // Vettore "prenotazione".
        var prenotazioni = [];

        // Impostare su true per abilitare dei valori di default con cui testare il programma.
        // Creato appunto per modificare lo stile più velocemente.
        var valoriEsempio = false;

        if (valoriEsempio) {
            // Metto dei valori di base per testare nel vettore prenotazioni
            prenotazioni.push({
                nome: "Anonymous",
                cognome: "GCA",
                citta: "Verbania",
                nazionalita: "Italiana",
                telefono: "06 12345678",
                cellulare: "333 1234567",
                fax: "06 12345678",
                email: "anonymousgca@anonymousgca.eu",
                camera: "doppia",
                dataArrivo: "2021-10-10",
                dataPartenza: "2021-10-12"
            });

            // Ne aggiungo un secondo
            prenotazioni.push({
                nome: "Mario",
                cognome: "Rossi",
                citta: "Milano",
                nazionalita: "Italiana",
                telefono: "02 12345678",
                cellulare: "333 1234567",
                fax: "02 12345678",
                email: "anonymousgca@anonymousgca.eu",
                camera: "singola",
                dataArrivo: "2021-10-10",
                dataPartenza: "2021-10-12"
            });
        }

        // Usando jQuery, quando viene premuto il tasto Invia eseguo del codice.
        $(document).ready(function() {
            $("#invia").click(function() {
                // Salvo i valore nell'oggetto prenotazione.
                prenotazione.nome = $("#nome").val();
                prenotazione.cognome = $("#cognome").val();
                prenotazione.citta = $("#citta").val();
                prenotazione.nazionalita = $("#nazionalita").val();
                prenotazione.telefono = $("#telefono").val();
                prenotazione.cellulare = $("#cellulare").val();
                prenotazione.fax = $("#fax").val();
                prenotazione.email = $("#email").val();
                prenotazione.camera = $("#camera").val();
                prenotazione.dataArrivo = $("#dataArrivo").val();
                prenotazione.dataPartenza = $("#dataPartenza").val();

                if (prenotazione.fax === "") {
                    prenotazione.fax = "Non presente";
                }
                if (prenotazione.cellulare === "") {
                    prenotazione.cellulare = "Non presente";
                }

                // Controllo se un campo è vuoto, nel caso lo fosse, non lo aggiungo e avviso l'utente.
                if (prenotazione.nome === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Nome è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.cognome === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Cognome è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.citta === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Città è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.nazionalita === "") {
                    // Notifica nazionalità
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Nazionalità è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.telefono === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Telefono è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.cellulare === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Cellulare è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.fax === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Fax è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.email === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Email è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.camera === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Camera è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.dataArrivo === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Data di arrivo è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                } else if (prenotazione.dataPartenza === "") {
                    // Notifica toast
                    $.toast({
                        heading: 'Errore',
                        text: 'Il campo Data di partenza è vuoto.',
                        showHideTransition: 'slide',
                        icon: 'error',
                        position: 'top-right'
                    });
                    return;
                }

                prenotazioni.push(prenotazione);

                // Imposto i contenuti dei form a "".
                $("input, select").val("");
                // Mostro con toast con i dati inseriti.
                $.toast({
                    heading: 'Prenotazione eseguita!',
                    text: 'Nome: ' + prenotazione.nome + '<br>Cognome: ' + prenotazione.cognome + '<br>Città: ' + prenotazione.citta + '<br>Nazionalità: ' + prenotazione.nazionalita + '<br>Telefono: ' + prenotazione.telefono + '<br>Cellulare: ' + prenotazione.cellulare + '<br>Fax: ' + prenotazione.fax + '<br>Email: ' + prenotazione.email + '<br>Camera: ' + prenotazione.camera + '<br>Data arrivo: ' + prenotazione.dataArrivo + '<br>Data partenza: ' + prenotazione.dataPartenza,
                    showHideTransition: 'slide',
                    icon: 'success',
                    position: 'top-right'
                });

                // Resetto l'oggetto prenotazione (svuoto).
                prenotazione = {
                    nome: "",
                    cognome: "",
                    citta: "",
                    nazionalita: "",
                    telefono: "",
                    cellulare: "",
                    fax: "",
                    email: "",
                    camera: "",
                    dataArrivo: "",
                    dataPartenza: ""
                };
            });
        });

        function mostraPrenotazioni() {
            var mostraPrenotazioni = $("#mostra-prenotazioni");

            if (prenotazioni.length === 0) {
                // Non ci sono prenotazioni, lo stampo sotto forma di testo rosso nel div con id "mostra-prenotazioni", animato
                mostraPrenotazioni.html("<p class='text-center text-danger h2'>Non ci sono prenotazioni.</p>").hide().fadeIn(1000);
                // Mostro con toast che non ci sono prenotazioni.
                $.toast({
                    heading: 'Errore',
                    text: 'Non ci sono prenotazioni!',
                    showHideTransition: 'slide',
                    icon: 'error',
                    position: 'top-right'
                });
                return;
            }

            // Inserisco nel div con id "mostra-prenotazioni" i dati delle prenotazioni salvate nei vettori.
            mostraPrenotazioni.html("<p class='text-center h3 mb-5'>Prenotazioni:</p>" + prenotazioni.map(function (prenotazione) {
                var nomeCognome = "\"" + prenotazione.nome + "\",\"" + prenotazione.cognome + "\"";
                return "<div class='row mb-5 border-top border-bottom border-3 border-light pt-3 pb-3 bg-black bg-opacity-25' id='" + prenotazione.nome + prenotazione.cognome +  "'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Nome: </p></div><div class='col'><p class='text-start'>" + prenotazione.nome + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Cognome: </p></div><div class='col'><p class='text-start'>" + prenotazione.cognome + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Città: </p></div><div class='col'><p class='text-start'>" + prenotazione.citta + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Nazionalità: </p></div><div class='col'><p class='text-start'>" + prenotazione.nazionalita + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Telefono: </p></div><div class='col'><p class='text-start'>" + prenotazione.telefono + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Cellulare: </p></div><div class='col'><p class='text-start'>" + prenotazione.cellulare + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Fax: </p></div><div class='col'><p class='text-start'>" + prenotazione.fax + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Email: </p></div><div class='col'><p class='text-start'>" + prenotazione.email + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Camera: </p></div><div class='col'><p class='text-start'>" + prenotazione.camera + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Data arrivo: </p></div><div class='col'><p class='text-start'>" + prenotazione.dataArrivo + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col'><p class='text-center'>Data partenza: </p></div><div class='col'><p class='text-start'>" + prenotazione.dataPartenza + "</p></div></div><hr class='text-light text-center'>" +
                    "<div class='row'><div class='col pb-2'><button class='btn btn-danger btn-block' onclick='elimina(" + nomeCognome + ")'>Elimina</button></div></div>" +
                    "</div>";
            }).join("")).hide().slideDown(1000);
        }

        // Usando JQuery, stampo i dati delle prenotazioni quando viene premuto il tasto "Visualizza".
        $(document).ready(function() {
            $("#visualizza").click(function() {

                mostraPrenotazioni();
            });
        });

        function elimina(nome, cognome) {
            var trovato = false;

            for (var i = 0; i < prenotazioni.length; i++) {
                if (prenotazioni[i].nome === nome && prenotazioni[i].cognome === cognome) {
                    prenotazioni.splice(i, 1);
                    trovato = true;
                    break;
                }
            }

            if (trovato) {
                $.toast({
                    heading: 'Prenotazione eliminata',
                    text: 'La prenotazione è stata eliminata con successo.',
                    showHideTransition: 'slide',
                    icon: 'success',
                    position: 'top-center'
                });
                // Nasconde con un'animazione di jquery il div con ID nome + cognome.
                $("#" + nome + cognome).animate({
                    opacity: 0.25,
                    left: "+=50",
                    height: "toggle"
                }, 500, function() {
                    // Rimuove il div con ID nome + cognome.
                    $("#" + nome + cognome).remove();
                    if (prenotazioni.length === 0) {
                        // Non ci sono prenotazioni, lo stampo sotto forma di testo rosso nel div con id "mostra-prenotazioni", animato
                        $("#mostra-prenotazioni").html("<p class='text-center text-danger h2'>Non ci sono prenotazioni.</p>").hide().fadeIn(1000);
                    }
                });
            } else {
                $.toast({
                    heading: 'Errore',
                    text: 'La prenotazione non è stata trovata.',
                    showHideTransition: 'slide',
                    icon: 'error',
                    position: 'top-center'
                });
            }
        }
    </script>
</head>
<body class="text-center text-light bg-black bg-opacity-75 font-monospace">
<div class="container text-light">
    <p class="h1 text-center">Esercizio:</p>
    <p class="text-center">Realizzare una pagina con inserimento dati salvandoli poi in un vettore e visualizzarli.</p>
    <div class="container-fluid bg-dark pt-3 pb-3 mb-3 rounded-4 px-3" data-aos="zoom-in">
        <div class="row text-start" data-aos="fade-right" data-aos-delay="100">
            <div class="col">
                <p>Dati personali:</p>
            </div>
        </div>
        <div class="row" data-aos="flip-right" data-aos-delay="100">
            <div class="col">

                <!-- Nome -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Nome</p>
                    </div>
                    <div class="col">
                        <!-- Input nome -->
                        <input type="text" id="nome" required class="form-control" placeholder="Nome">
                    </div>
                </div>

                <!-- Città -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Città</p>
                    </div>
                    <div class="col">
                        <!-- Input città -->
                        <input type="text" id="citta" required class="form-control" placeholder="Città">
                    </div>
                </div>

                <!-- Telefono -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Telefono</p>
                    </div>
                    <div class="col">
                        <!-- Input telefono -->
                        <input type="tel" id="telefono" required class="form-control" placeholder="Telefono">
                    </div>
                </div>

                <!-- Fax -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Fax</p>
                    </div>
                    <div class="col">
                        <!-- Input fax -->
                        <input type="text" id="fax" class="form-control" placeholder="Fax">
                    </div>
                </div>


            </div>
            <div class="col">

                <!-- Cognome -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Cognome</p>
                    </div>
                    <div class="col">
                        <!-- Input cognome -->
                        <input type="text" id="cognome" class="form-control" placeholder="Cognome">
                    </div>
                </div>

                <!-- Nazionalità -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Nazionalità</p>
                    </div>
                    <div class="col">
                        <!-- Input nazionalità -->
                        <input type="text" id="nazionalita" required class="form-control" placeholder="Nazionalità">
                    </div>
                </div>

                <!-- Cellulare -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Cellulare</p>
                    </div>
                    <div class="col">
                        <!-- Input cellulare -->
                        <input type="tel" id="cellulare" class="form-control" placeholder="Cellulare">
                    </div>
                </div>

                <!-- Email -->
                <div class="row">
                    <div class="col">
                        <p class="pt-1">Email</p>
                    </div>
                    <div class="col">
                        <!-- Input email -->
                        <input type="text" id="email" required class="form-control" placeholder="Email">
                    </div>
                </div>

            </div>
        </div>
        <div class="row pt-3 pb-3" data-aos="fade-down" data-aos-delay="250">
            <div class="col">
                <p class="text-start">Dati prenotazione:</p>
            </div>
        </div>
        <div class="row" data-aos="flip-left" data-aos-delay="250">
            <div class="col">

                <div class="row">
                    <div class="col-3">
                        <p class="pt-1">Camera</p>
                    </div>
                    <div class="col">
                        <!-- Input camera con selettore singola, doppia, famigliare -->
                        <select id="camera" class="form-select">
                            <option value="singola">Singola</option>
                            <option value="doppia">Doppia</option>
                            <option value="famigliare">Famigliare</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-3">
                        <p class="pt-1">Data arrivo</p>
                    </div>
                    <div class="col">
                        <!-- Input data arrivo -->
                        <input type="date" id="dataArrivo" class="form-control">
                    </div>
                </div>

                <div class="row">
                    <div class="col-3">
                        <p class="pt-1">Data partenza</p>
                    </div>
                    <div class="col">
                        <!-- Input data partenza -->
                        <input type="date" id="dataPartenza" class="form-control">
                    </div>
                </div>

            </div>
        </div>
        <div class="row pt-3" data-aos="flip-down" data-aos-delay="400">
            <div class="col">
                <button id="invia" class="btn btn-success mt-3">Invia</button>
            </div>
        </div>
        <div class="row pt-3">
            <div class="col">
                <button id="visualizza" class="btn btn-primary mt-3">Visualizza</button>
            </div>
        </div>
        <div class="row pt-5">
            <div class="col pt-5" id="mostra-prenotazioni">
            </div>
        </div>

    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
</script>
</body>
</html>